!function(a){function b(a,b,c){a.setSpeed(null).setTiming(null),b.setSpeed(null).setTiming(null),250==c.speed&&"ease"==c.timing||(a.setSpeed(c.speed).setTiming(c.timing),b.setSpeed(c.speed).setTiming(c.timing))}a.fn.setSpeed=function(a){return this.css({"-webkit-transition-duration":a+"ms","-moz-transition-duration":a+"ms","-ms-transition-duration":a+"ms","-o-transition-duration":a+"ms","transition-duration":a+"ms"})},a.fn.setTiming=function(a){return this.css({"-webkit-transition-timing-function":a,"-moz-transition-timing-function":a,"-ms-transition-timing-function":a,"-o-transition-timing-function":a,"transition-timing-function":a})},a.fn.quickModal=function(c,d){function e(a){27==a.keyCode&&j.is(":visible")&&g.enableEsc&&f()}function f(){k.quickModal("close",g),h.unbind("keyup",e),i.unbind("click"),a("#modal-background").unbind("click")}if(null!==c&&"string"==typeof c){var g=a.extend({animation:"fade-zoom",speed:250,timing:"ease",closeModalSelector:".close-modal",enableEsc:!0,enableClickAway:!0,enableBodyScroll:!1,appendBackgroundTo:"body",onOpen:function(){},onClose:function(){}},d),h=a("body"),i=a(g.closeModalSelector),j=a(".modal"),k=this;switch(a("#modal-background").length||a(g.appendBackgroundTo).append('<div id="modal-background"></div>'),b(k,a("#modal-background"),g),j.removeClass().addClass("modal").addClass("animation-"+g.animation),c){case"open":g.enableBodyScroll||h.addClass("disable-scroll"),j.hide(),k.show(),h.keyup(e),a("#modal-background").show(),setTimeout(function(){g.enableClickAway&&a("#modal-background").click(f),a("#modal-background").addClass("visible"),k.addClass("visible"),k.trigger("modalopen"),g.onOpen.call()},25),i.click(function(a){a.preventDefault(),f()});break;case"close":h.removeClass("disable-scroll"),a("#modal-background").removeClass("visible"),k.removeClass("visible"),g.onClose.call(),setTimeout(function(){a("#modal-background").hide(),k.hide(),k.trigger("modalclose")},g.speed);break;case"trigger":var l=k.data("modal-id"),m=a("#"+l);m.quickModal("open",g);break;default:console.error("The method you entered does not exist.")}}else{var k=this;k.click(function(b){b.preventDefault();var d=a(this).data("modal-id"),e=a("#"+d);void 0===d?console.error('No "data-modal-id" attribute has been set.'):e.quickModal("open",c)})}return this}}(jQuery),function(a,b,c){"use strict";b.ViewModel=b.ViewModel||{},ViewModel.UsuarioViewModel=function(){function d(a,c,d){var e="string"==typeof c?c:Object.keys(c).map(function(a){return encodeURIComponent(a)+"="+encodeURIComponent(c[a])}).join("&"),f=b.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");return f.open("POST",a),f.onreadystatechange=function(){f.readyState>3&&200==f.status&&d(f.responseText)},f.setRequestHeader("X-Requested-With","XMLHttpRequest"),f.setRequestHeader("Content-Type","application/json; charset=utf-8"),f.send(JSON.stringify(e)),f}var e=this;e.dados=ko.observable({}),e.carregando=ko.observable(),e.verificado=ko.observable(!1),e.logado=ko.computed(function(){return this.verificado()?!!this.dados().Codigo:null},e),e.verificar=function(c,d){if(!e.logado()&&!e.carregando())return e.carregando(!0),a.ajax({type:"POST",url:b.location.origin+"/api/v2/usuario/profile",success:function(a){e.historicoLogin(a.Codigo),e.dados(a),"function"==typeof c&&c(a)},error:function(a,b,c){e.dados({}),"function"==typeof d&&d(a,b,c)},complete:function(){e.carregando(!1),e.verificado(!0)}})},e.alterarDados=function(c,d,f){if(e.logado()&&!e.carregando())return e.carregando(!0),a.ajax({type:"POST",url:b.location.origin+"/api/v2/usuario/change-user",processData:!1,contentType:!1,data:c,success:function(a){e.dados(a),"function"==typeof d&&d(a)},error:function(a,b,c){"function"==typeof f&&f(a,b,c)},complete:function(){e.carregando(!1)}})},e.alterarSenha=function(c,d,f){if(e.logado()&&!e.carregando())return e.carregando(!0),a.ajax({type:"POST",url:b.location.origin+"/api/v2/usuario/change-password",data:c,success:function(a){"function"==typeof d&&d(a)},error:function(a,b,c){"function"==typeof f&&f(a,b,c)},complete:function(){e.carregando(!1)}})},e.entrar=function(c,d,f){if(!e.logado()&&!e.carregando())return e.carregando(!0),a.ajax({type:"POST",url:b.location.origin+"/api/v2/usuario/login-user",data:c,success:function(a){e.historicoLogin(a.Codigo),e.dados(a),"function"==typeof d&&d(a)},error:function(a,b,c){"function"==typeof f&&f(a,b,c)},complete:function(){e.carregando(!1)}})},e.cadastrar=function(c,d,f){if(!e.logado()&&!e.carregando())return e.carregando(!0),a.ajax({type:"POST",url:b.location.origin+"/api/v2/usuario/new-user",data:c,success:function(a){e.historicoLogin(a.Codigo),e.dados(a),"function"==typeof d&&d(a)},error:function(a,b,c){"function"==typeof f&&f(a,b,c)},complete:function(){e.carregando(!1)}})},e.recuperarSenha=function(c,d,f){if(!e.logado()&&!e.carregando())return e.carregando(!0),a.ajax({type:"POST",dataType:"json",url:b.location.origin+"/api/v2/usuario/recovery-password",data:c,success:function(a){"function"==typeof d&&d(a)},error:function(a,b,c){"function"==typeof f&&f(a,b,c)},complete:function(){e.carregando(!1)}})},e.verificarEmail=function(c,d,e){return a.ajax({type:"POST",url:b.location.origin+"/api/v2/usuario/mail-available",data:c,success:function(a){"function"==typeof d&&d(a)},error:function(a,b,c){"function"==typeof e&&e(a,b,c)}})},e.sair=function(){if(e.logado()&&!e.carregando())return e.carregando(!0),a.ajax({type:"POST",dataType:"json",url:b.location.origin+"/api/v2/usuario/logout",success:function(a){e.dados({}),"function"==typeof success&&success(a)},error:function(a,b,c){"function"==typeof error&&error(a,b,c)},complete:function(){e.carregando(!1)}})},e.historicoLogin=function(a){var e=!1;if(null===sessionStorage.getItem("gravouHistoricoLogin")&&c.referrer.indexOf("tecmundo.com.br")==-1&&(e=!0),e){var f=NZN.Cookie.get("subscriptionIdv4"),g={userAgent:navigator.userAgent,application:b.__application,userObjectId:a,appObjectId:b.__applicationId,pageUrl:b.location.href,guid:NZN.Cookie.get("nzn_trck_gd"),data:"{'tokenNotificacao': '"+(f?f:"")+"'}"};d("https://lb.nznweb.com.br/api/v1/signin",JSON.stringify(g),function(){sessionStorage.setItem("gravouHistoricoLogin",(new Date).getTime())})}},e.verificar()}}(window.jQuery,window,document),function(a,b,c){"use strict";b.NZN=b.NZN||{},NZN.HeaderUserMenuComponent=function(){function c(){var c=this;c.sair=function(c,d){NZN.Usuario.sair(),a(d.target).closest(".tippy-popper")[0]._tippy.hide(),b.location.pathname.indexOf("/meus-dados/")!==-1&&(b.location.href="/")}}var d;return{getInstance:function(a){return d||(d=new c),ko.dataFor(a)||ko.applyBindings(d,a),d}}}()}(window.jQuery,window,document),function(a,b,c){"use strict";b.NZN=b.NZN||{},NZN.HeaderWishlistPopoverComponent=function(){function b(){var b=this;b.dados=ko.computed(function(){return ViewModel.UsuarioListaDesejosViewModel.dados().slice(0,3)},b),b.remover=function(b,c){a(c.target).closest(".tippy-popper")[0]._tippy.hide();var d="#modal-remove-item",e="#remove-item-button",f=function(){ViewModel.UsuarioListaDesejosViewModel.remover(b.Codigo,function(){a(d).quickModal("close")})};a("#remove-item-name",d).text(b.Nome),a(e,d).one("click touch",f),a(d).quickModal("open",{onClose:function(){a(e,d).off("click touch",f)}})}}var c;return{getInstance:function(a){return c||(c=new b),ko.dataFor(a)||ko.applyBindings(c,a),c}}}()}(window.jQuery,window,document),function(a,b,c){"use strict";function d(b,c,d){h||(h=!0,a.ajax({type:"GET",url:b,cache:!1,success:function(a){i?f(a):e(a),"function"==typeof c&&c()},error:function(a,b,c){"function"==typeof d&&d()},complete:function(){h=!1}}))}function e(c){i=a("<div/>",{class:"modal-container"}).css({position:"fixed","z-index":1e6,top:0,width:"100%",left:0,height:"100%",display:"flex",padding:"10px",overflow:"hidden"}),i.html(a(c)).appendTo("body"),j=i.find(".modal"),j.css({position:"relative","max-height":"none","margin-top":"auto","margin-bottom":"auto",top:"auto",left:"auto"});var d=function(a){"modal-container"===a.target.className&&j.quickModal("close")};i.on("click touch",d),j.on("modalclose",function(){i.off("click touch",d),/lista-desejos|meus-dados/.test(b.location.pathname)&&!NZN.Usuario.logado()&&(b.location.href="/"),g()}),j.quickModal("open",{animation:"fade-down",onOpen:function(){i.css({overflow:"auto"});var a=j.find("input")[0];a&&a.focus()},onClose:function(){},closeModalSelector:".modal-close"})}function f(a){g(),e(a)}function g(){j.off(),i.remove(),j=null,i=null}var h,i,j;b.NZN=b.NZN||{},NZN.Usuario=new ViewModel.UsuarioViewModel,NZN.Usuario.modalEntrar=function(a){a&&a.preventDefault(),d("/usuario/entrar.htm?modal=true",ViewModel.EntrarViewModel.getInstance)},NZN.Usuario.modalCadastrar=function(a){a&&a.preventDefault(),d("/usuario/cadastrar.htm?modal=true",ViewModel.CadastrarViewModel.getInstance)},NZN.Usuario.modalRecuperarSenha=function(a){a&&a.preventDefault(),d("/usuario/recuperar-senha.htm?modal=true",ViewModel.RecuperarSenhaViewModel.getInstance)}}(window.jQuery,window,document),function(a,b,c){"use strict";b.ViewModel=b.ViewModel||{},ViewModel.EntrarViewModel=function(){function b(){var b=this;b.email=ko.observable(),b.emailErro=ko.observable(),b.senha=ko.observable(),b.senhaErro=ko.observable(),b.entrarErro=ko.observable(),b.email.subscribe(function(a){var c="";a?NZN.Tools.validarEmail(a)||(c="E-mail inválido"):c="Campo obrigatório",b.emailErro(c)}),b.senha.subscribe(function(a){var c="";a?a.length<6&&(c="Senha deve ter no mínimo 6 caracteres"):c="Campo obrigatório",b.senhaErro(c)}),b.prevenirEntrar=ko.computed(function(){return!(!this.emailErro()&&!this.senhaErro()&&this.email()&&this.senha())},b),b.validarCampos=function(){var a={email:"emailErro",senha:"senhaErro"};for(var c in a)b[c]()||b[a[c]]("Campo obrigatório")},b.entrar=function(){if(b.validarCampos(),!b.prevenirEntrar()&&!NZN.Usuario.carregando()){var c={Email:b.email(),Senha:b.senha()},d=function(c){b.entrarErro("");var d=a(".modal.visible");d&&d.quickModal("close")},e=function(a,c,d){b.entrarErro("E-mail ou senha inválidos")};NZN.Usuario.entrar(c,d,e)}}}var d;return{getInstance:function(){var a=c.querySelector("#form-entrar");return d||(d=new b),ko.dataFor(a)||ko.applyBindings(d,a),d}}}()}(window.jQuery,window,document),function(a,b,c){"use strict";b.ViewModel=b.ViewModel||{},ViewModel.CadastrarViewModel=function(){function b(){var b=this;b.nome=ko.observable(),b.nomeErro=ko.observable(),b.sobrenome=ko.observable(),b.sobrenomeErro=ko.observable(),b.email=ko.observable(),b.emailErro=ko.observable(),b.senha=ko.observable(),b.senhaErro=ko.observable(),b.confirmaSenha=ko.observable(),b.confirmaSenhaErro=ko.observable(),b.termosDeUso=ko.observable(),b.termosDeUsoErro=ko.observable(),b.cadastrarErro=ko.observable(),b.nome.subscribe(function(a){var c="";a?NZN.Tools.validarNome(a)||(c="Nome inválido"):c="Campo obrigatório",b.nomeErro(c)}),b.sobrenome.subscribe(function(a){var c="";a?NZN.Tools.validarNome(a)||(c="Sobrenome inválido"):c="Campo obrigatório",b.sobrenomeErro(c)}),b.email.subscribe(function(a){return a?NZN.Tools.validarEmail(a)?void NZN.Usuario.verificarEmail({Email:b.email},function(a){a.emailEmUso?b.emailErro("E-mail já cadastrado"):b.emailErro("")}):void b.emailErro("E-mail inválido"):void b.emailErro("Campo obrigatório")}),b.senha.subscribe(function(a){var c="";a?a.length<6&&(c="Senha deve ter no mínimo 6 caracteres"):c="Campo obrigatório",b.senhaErro(c)}),b.confirmaSenha.subscribe(function(a){var c="";a?a!==b.senha()&&(c="Senhas não conferem"):c="Campo obrigatório",b.confirmaSenhaErro(c)}),b.prevenirCadastrar=ko.computed(function(){return!(!(this.nomeErro()||this.sobrenomeErro()||this.emailErro()||this.senhaErro()||this.confirmaSenhaErro())&&this.nome()&&this.sobrenome()&&this.email()&&this.senha()&&this.confirmaSenha()&&this.termosDeUso())},b),b.validarCampos=function(){var a={nome:"nomeErro",sobrenome:"sobrenomeErro",email:"emailErro",senha:"senhaErro",confirmaSenha:"confirmaSenhaErro"};for(var c in a)b[c]()||b[a[c]]("Campo obrigatório");b.termosDeUso()||b.cadastrarErro("Você precisa concordar com os termos de uso")},b.cadastrar=function(){if(b.validarCampos(),!b.prevenirCadastrar()&&!NZN.Usuario.carregando()){var c={Nome:b.nome(),Sobrenome:b.sobrenome(),Email:b.email(),Senha:b.senha(),ConfirmaSenha:b.confirmaSenha(),AceitoTermos:!0},d=function(c){b.cadastrarErro("");var d=a(".modal.visible");d&&d.quickModal("close")},e=function(a,c,d){if(400===a.status){var e=JSON.parse(a.responseJSON.Message),f={Nome:"nomeErro",Sobrenome:"sobrenomeErro",Email:"emailErro",Senha:"senhaErro",ConfirmaSenha:"confirmaSenhaErro",AceitoTermos:"termosDeUsoErro"};for(var g in e)f[g]&&b[f[g]](e[g]);b.cadastrarErro("")}else b.cadastrarErro("Erro ao cadastrar")};NZN.Usuario.cadastrar(c,d,e)}}}var d;return{getInstance:function(){var a=c.querySelector("#form-cadastrar");return d||(d=new b),ko.dataFor(a)||ko.applyBindings(d,a),d}}}()}(window.jQuery,window,document),function(a,b,c){"use strict";b.ViewModel=b.ViewModel||{},ViewModel.RecuperarSenhaViewModel=function(){function a(){var a=this;a.email=ko.observable(),a.emailErro=ko.observable(),a.recuperarSucesso=ko.observable(),a.recuperarErro=ko.observable(),a.email.subscribe(function(b){var c="";b?NZN.Tools.validarEmail(b)||(c="E-mail inválido"):c="Campo obrigatório",a.emailErro(c)}),a.recuperarErro.subscribe(function(b){b&&a.recuperarSucesso("")}),a.recuperarSucesso.subscribe(function(b){b&&a.recuperarErro("")}),a.prevenirEntrar=ko.computed(function(){return!(!this.emailErro()&&this.email())},a),a.validarCampos=function(){a.email()||a.emailErro("Campo obrigatório")},a.recuperar=function(){if(a.validarCampos(),!a.prevenirEntrar()&&!NZN.Usuario.carregando()){var b={Email:a.email()},c=function(b){a.recuperarSucesso("Link para redefinir a senha foi enviado para seu e-mail")},d=function(b,c,d){if(400===b.status){var e=JSON.parse(b.responseJSON.Message),f={Email:"emailErro"};for(var g in e)f[g]&&a[f[g]](e[g]);a.recuperarErro("")}else a.recuperarErro("Erro ao recuperar senha")};NZN.Usuario.recuperarSenha(b,c,d)}}}var b;return{getInstance:function(){var d=c.querySelector("#form-recuperar-senha");return b||(b=new a),ko.dataFor(d)||ko.applyBindings(b,d),b}}}()}(window.jQuery,window,document),function(a,b,c){"use strict";b.ViewModel=b.ViewModel||{},ViewModel.MeusDadosViewModel=function(){var a=this;a.nome=ko.observable(),a.nomeErro=ko.observable(),a.sobrenome=ko.observable(),a.sobrenomeErro=ko.observable(),a.email=ko.observable(),a.emailErro=ko.observable(),a.avatar=ko.observable(),a.avatarPreview=ko.observable(),a.avatarErro=ko.observable(),a.celular=ko.observable(),a.senhaAtual=ko.observable(),a.senhaAtualErro=ko.observable(),a.senhaNova=ko.observable(),a.senhaNovaErro=ko.observable(),a.confirmaSenha=ko.observable(),a.confirmaSenhaErro=ko.observable(),a.alterarSenhaErro=ko.observable(),a.alterarSenhaSucesso=ko.observable(),a.alterarDadosErro=ko.observable(),a.alterarDadosSucesso=ko.observable(),a.nome.subscribe(function(b){var c="";b?NZN.Tools.validarNome(b)||(c="Nome inválido"):c="Campo obrigatório",a.nomeErro(c)}),a.sobrenome.subscribe(function(b){var c="";b?NZN.Tools.validarNome(b)||(c="Sobrenome inválido"):c="Campo obrigatório",a.sobrenomeErro(c)}),a.senhaAtual.subscribe(function(b){var c="";b?b.length<6&&(c="Senha deve ter no mínimo 6 caracteres"):c="Campo obrigatório",a.senhaAtualErro(c)}),a.senhaNova.subscribe(function(b){var c="";b?b.length<6?c="Senha deve ter no mínimo 6 caracteres":b===a.senhaAtual()&&(c="A senha nova deve ser diferente da atual"):c="Campo obrigatório",a.senhaNovaErro(c)}),a.confirmaSenha.subscribe(function(b){var c="";b?b!==a.senhaNova()&&(c="Senhas não conferem"):c="Campo obrigatório",a.confirmaSenhaErro(c)}),a.alterarDadosErro.subscribe(function(b){b&&a.alterarDadosSucesso("")}),a.alterarDadosSucesso.subscribe(function(b){b&&a.alterarDadosErro("")}),a.alterarSenhaErro.subscribe(function(b){b&&a.alterarSenhaSucesso("")}),a.alterarSenhaSucesso.subscribe(function(b){b&&a.alterarSenhaErro("")}),NZN.Usuario.logado.subscribe(function(c){c?a.carregarDados(NZN.Usuario.dados()):c===!1&&/meus-dados/.test(b.location.pathname)&&NZN.Usuario.modalEntrar()}),a.prevenirSalvarDados=ko.computed(function(){return!(!this.nomeErro()&&!this.sobrenomeErro()&&this.nome()&&this.sobrenome())},a),a.prevenirAlterarSenha=ko.computed(function(){return!(!(this.senhaAtualErro()||this.senhaNovaErro()||this.confirmaSenhaErro())&&this.senhaAtual()&&this.senhaNova()&&this.confirmaSenha())},a),a.validarCamposDados=function(){var b={nome:"nomeErro",sobrenome:"sobrenomeErro"};for(var c in b)a[c]()||a[b[c]]("Campo obrigatório")},a.validarCamposSenha=function(){var b={senhaAtual:"senhaAtualErro",senhaNova:"senhaNovaErro",confirmaSenha:"confirmaSenhaErro"};for(var c in b)a[c]()||a[b[c]]("Campo obrigatório")},a.alterarDados=function(){if(a.validarCamposDados(),!a.prevenirSalvarDados()&&!NZN.Usuario.carregando()){var b=new FormData;b.append("Nome",a.nome()),b.append("Sobrenome",a.sobrenome()),b.append("NomeAparelho",a.celular()),b.append("Foto",a.avatar());var c=function(b){a.carregarDados(b),a.alterarDadosSucesso("Dados alterados")},d=function(b,c,d){a.alterarDadosErro("Erro ao alterar dados")};NZN.Usuario.alterarDados(b,c,d)}},a.alterarSenha=function(){if(a.validarCamposSenha(),!a.prevenirAlterarSenha()&&!NZN.Usuario.carregando()){var b={SenhaAtual:a.senhaAtual(),NovaSenha:a.senhaNova(),ConfirmaNovaSenha:a.confirmaSenha()},c=function(b){a.alterarSenhaSucesso("Senha alterada")},d=function(b,c,d){try{var e=JSON.parse(b.responseJSON.Message),f={SenhaAtual:"senhaAtualErro",NovaSenha:"senhaNovaErro",ConfirmaNovaSenha:"confirmaSenhaErro"};for(var g in e)f[g]&&a[f[g]](e[g]);a.alterarSenhaErro("")}catch(b){a.alterarSenhaErro("Erro ao alterar senha")}};NZN.Usuario.alterarSenha(b,c,d)}},a.carregarDados=function(b){a.nome(b.Nome),a.sobrenome(b.Sobrenome),a.celular(b.NomeAparelho),a.email(b.Email),a.avatarPreview(b.Foto)},a.escolherAvatar=function(b,c){var d=c.target.files[0];if(d&&d.type.match(/image.*/)){var e=new FileReader;e.onload=function(b){a.avatarPreview(b.target.result)},e.readAsDataURL(d),a.avatar(d)}}};var d=c.querySelector("#form-meus-dados");if(d){var e=new ViewModel.MeusDadosViewModel;ko.applyBindings(e,d),NZN.typeaheadConfig({component:a("#form-meus-dados #celular")})}}(window.jQuery,window,document);